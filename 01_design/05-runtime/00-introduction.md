# Runtime · Introduction

## 1. Runtime 在 Agent 心智系统中的位置

Runtime 并非外部调度系统，
也并非认知之上的控制框架。

**Runtime 是 Agent 心智系统中的一个基础功能层，
对应人类系统中“大脑负责统一时间线与现实因果的那一部分功能”。**

在本设计中，Agent 的**心智系统**并不是单一模块，
而是由多个功能系统围绕“感知—认知—行为—时间”协同构成，其中包括：

- **Perception**：感官输入系统（对应感官器官，而非大脑本体）
- **Cognition**：推理与认知结构（对应大脑中的认知与思维功能）
- **Runtime**：时间与因果整合系统（对应大脑中负责时间线与行动裁决的功能）
- **Action**：行为执行系统（对应肌肉与运动系统）
- **Memory**：记忆系统（用于跨时间保存经验与历史信息）
- **Control State**：状态调制系统（用于表达 Agent 在一段时间内的整体运行状态与约束）

Runtime 对应的不是“思考”本身，
而是**将并发的感知与认知结果提交到单一现实时间线中的时间与因果裁决功能**。

---

## 2. 以人脑为原型的功能分工假设

在人类大脑中，并不存在一个“全局思考线程”。

真实情况是：

- 多条认知活动可以同时发生
- 感官输入持续不断、并发涌入
- 行为一旦发生，必须服从现实时间
- 世界变化可以随时打断正在进行的动作

但与此同时，人类始终只生活在**一条现实时间线**上。

本设计正是基于这一事实建立。

Runtime 的职责，不是产生想法，
而是**决定哪一刻是什么、哪一次行为仍然合法**。

---

## 3. 并发能力与单一时间线的区分

在 Agent 的心智系统中，不同功能具有不同的并发属性：

### 可并发执行的功能

- **Perception**

  - 多源感知同时发生
  - 不阻塞、不等待、不裁决
  - 持续产生感知事件流

- **Cognition**

  - 多个认知实例可同时运行
  - 每次认知在封闭输入下完成
  - 认知过程不可中断
  - 认知结果不保证生效

这些并发活动**不直接改变世界**，
因此不具备因果风险。

---

### 必须受控于单一时间线的功能

- **Action**

  - 行为跨越现实时间
  - 具有外部副作用
  - 必须支持暂停、恢复与终止
  - 不允许脱离时间裁决独立存在

- **跨时间状态变更**

  - 记忆写入
  - 行为状态更新
  - 控制状态变更

这些操作一旦发生，
就会进入不可逆的因果链。

---

## 4. Runtime 的核心职责：并发 → 时间 → 因果

Runtime 正是用于协调上述两类功能之间的根本差异。

Runtime 承担以下职责：

1. **统一时间线**

   - 定义唯一的时间边界
   - 决定“当前时刻”与“下一时刻”

2. **并发收敛**

   - 接收并发的感知与认知结果
   - 不处理语义，仅处理时间归属

3. **因果裁决**

   - 判断认知结果是否仍基于当前世界
   - 决定哪些结果可以触发行为
   - 决定哪些行为必须被中断或终止

Runtime 是唯一有权
**将并发活动提交到现实时间线中的系统**。

---

## 5. 中断、恢复与不可中断的协作原则

在本设计中，不同功能遵循不同的时间控制规则：

- **Cognition**

  - 不可中断
  - 只能整体取消
  - 其结果可能被 Runtime 废弃

- **Action**

  - 必须可中断
  - 可暂停、恢复或终止
  - 生命周期完全受 Runtime 控制

Runtime 不介入认知过程，
但对所有跨时间存在的行为拥有最终裁决权。

---

## 6. 设计边界

Runtime 明确不承担以下职责：

- 不进行任何语义判断
- 不参与认知推理
- 不生成决策内容
- 不解释感知信息

Runtime 只处理一类问题：

> **哪些并发事件可以进入同一条现实时间线**

---

## 7. 设计目标

通过将 Runtime 明确为大脑中的时间与因果整合系统，
本设计希望实现：

- 并发认知的安全探索
- 行为执行的严格约束
- 时间与因果的唯一裁决
- 心智系统整体的一致性与可验证性

Runtime 的存在，
不是为了让 Agent 更聪明，
而是为了让 Agent **不会在时间中自相矛盾**。
