# Cognition Execution Flow（v0.1）

本文档描述 **Cognition 在系统执行阶段中的运行流程**。
目标是明确：**Cognition 在什么时候被调用、接收什么、做什么、产出什么、交给谁**。

本文档不涉及字段设计、不涉及模型实现，仅定义执行语义。

---

## 1. Cognition 的原始输入是什么？

Cognition 的原始输入不是一个结构体，而是**一组需要被理解的材料集合**。

这些材料可能来自：

- **Perception**

  - 新的用户输入
  - 外部系统事件
  - 感官观测结果

- **Runtime**

  - 当前焦点任务
  - 当前执行状态

- **Memory（可选）**

  - 与当前任务相关的历史信息

关键约定：

> Cognition 接收的是 **多源并列存在的输入材料**，
> 而不是已经融合、整理好的“认知输入”。

在进入 Cognition 时，这些材料之间**尚未建立语义关系**。

---

## 2. Cognition 如何处理这些输入？

Cognition 的处理过程分为三个连续阶段。

### 2.1 收集阶段（Collect）

- 接收 Runtime 判定为“当前需要被思考”的所有输入材料
- 不进行理解、不进行判断
- 不做总结、不做推理

该阶段的目标只有一个：

> 明确 **这一轮认知要面对哪些材料**

---

### 2.2 整理阶段（Organize）

在该阶段，Cognition 对输入材料进行**语义层面的整理，但不做结论**：

- 区分不同来源的信息（用户 / 感官 / 系统 / 历史）
- 明确哪些是：

  - 已知信息
  - 不确定信息
  - 冲突信息

- 明确当前认知所处的任务语境：

  - 新任务
  - 任务延续
  - 任务修正
  - 异常恢复

该阶段的产物是：

> 一个 **可被思考的问题空间**

而不是答案。

---

### 2.3 理解与判断阶段（Reason）

在此阶段，Cognition 对整理后的问题空间进行语义理解和判断：

- 当前问题的核心是什么
- 在现有信息与约束下，可以得出哪些结论
- 是否需要进一步信息
- 是否存在风险、不确定性或冲突无法消解

这是 Cognition 中**唯一允许进行“推理”的阶段**。

---

## 3. Cognition 的输出是什么？

Cognition 的输出是一次 **语义判断结果**，而不是执行指令。

输出可能包括：

- 对当前问题的判断或结论
- 一个高层次的计划草案（做什么，而不是怎么做）
- 明确指出：

  - 当前缺失的信息
  - 无法继续的原因
  - 潜在风险或不确定性

重要约定：

> Cognition 的输出 **不直接触发任何执行行为**。

---

## 4. Cognition 的输出交给谁？

Cognition 的输出会被分发给不同模块，各模块只取自己关心的部分。

### 4.1 Runtime

- 用于判断：

  - 当前认知是否完成
  - 是否需要等待更多输入
  - 是否需要切换任务状态

Runtime 不关心认知细节，只关心**状态变化**。

---

### 4.2 Action

- 接收 Cognition 给出的“要做什么”的语义意图
- 不接收执行步骤
- 不接收工具选择细节

Action 负责“如何做”，而不是“是否该做”。

---

### 4.3 Memory（可选）

- 接收 Cognition 的结果或关键判断
- 是否存储、如何存储，不由 Cognition 决定

---

## 5. Flow 总结

```
Perception / System / User
        ↓
Runtime（判断是否需要认知）
        ↓
Cognition
  - 收集输入材料
  - 整理问题空间
  - 进行理解与判断
        ↓
认知结果
        ↓
Runtime / Action / Memory
```

---

## 6. 核心原则（Execution 级别）

- Cognition 是系统中 **唯一进行语义理解与判断的模块**
- Cognition 不负责执行、不负责调度、不负责存储
- Cognition 的输入是“材料集合”，不是 prompt
- Cognition 的输出是“语义结果”，不是行为指令
