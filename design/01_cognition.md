# Agent 认知层（Cognition）

## Agent 认知层（Cognition）设计文档

### 1. 设计目标

认知层的目标不是“智能”，而是**决策一致性**。

> 认知层负责将来自系统各处的异构信息，
> 转化为一次**结构化、可推理、可审计的语义决策结果**。

LLM 在此层中仅作为**推理引擎**存在，而非系统主体。

---

### 2. 认知层的职责边界

#### 2.1 认知层**负责**

- 理解当前任务 / 问题的语义本质
- 在给定上下文与约束下形成判断、结论或计划草案
- 输出**结构化的认知结果**，供后续模块使用

#### 2.2 认知层**不负责**

- 信息采集（属于感官 Perception）
- 长期存储（属于记忆 Memory）
- 行为执行或工具选择（属于行动 Action）
- 行为风格、语气、策略偏好（属于行为调制状态 Control State）
- 调度、并发、中断（属于时间 / Runtime）

> 认知层只“想清楚”，不“记住”、不“去做”、不“怎么表现”。

---

### 3. 认知层的内部结构（逻辑视角）

认知层由三段逻辑过程构成：

1. **认知前处理（Cognitive Preprocessing）**
2. **推理引擎调用（LLM Reasoning）**
3. **认知结果封装（Cognitive Output Structuring）**

其中，只有第 2 步依赖 LLM。

---

### 4. 认知前处理（关键定义）

认知前处理是认知层中**不可省略、不可弱化**的步骤。

其目标不是“清洗文本”，而是完成**信息的语义分型与对齐**。

#### 4.1 信息来源标注（Source Tagging）

所有进入认知层的信息，必须被显式标注来源类型，例如：

- 用户输入（User）
- 感官输入（Perception）
- 记忆读取（Memory）
- 系统状态 / 反馈（System / Runtime）

> 不同来源的信息，在认知中**权重不同，但不在此层裁决权重**，只做标注。

---

#### 4.2 时间与状态对齐（Temporal Context）

认知前处理必须明确当前认知所处的时间语义：

- 新任务
- 任务延续
- 任务修正
- 异常 / 失败后的再认知

认知层不维护时间轴，但必须**知道自己站在哪一刻**。

---

#### 4.3 不确定性与冲突标记

进入认知层的信息需被区分为：

- 已知事实
- 假设 / 推测
- 缺失信息
- 冲突信息

认知层不解决冲突来源，只需**显式感知冲突存在**。

---

### 5. 认知输入结构（抽象定义）

认知前处理的输出不是 prompt，而是一个**稳定的认知输入结构**，至少包含：

- 当前任务 / 问题描述
- 已知事实集合（含来源标注）
- 约束条件
- 未知点 / 冲突点
- 系统级不可变规则引用（只读）

该结构是：

- 可审计的
- 可版本化的
- 与具体模型实现解耦的

---

### 6. 推理引擎（LLM）的角色定义

LLM 在认知层中被定义为：

> **在给定结构化语义问题空间内，
> 执行推理、归纳、权衡与生成结构化结论的引擎。**

约束原则：

- LLM 不持有长期状态
- LLM 不定义自身角色或系统边界
- LLM 不决定行为风格
- LLM 的输出必须符合预期结构

---

### 7. 认知输出结构

认知层的输出是**结构化认知结果**，可能包括：

- 判断 / 结论
- 任务拆解建议
- 行动意图草案
- 需要补充的信息请求
- 风险或不确定性提示

该输出：

- 不直接触发执行
- 不包含行为风格
- 不包含时间调度决策

---

### 8. 与其他功能模块的关系

- **感官 → 认知**：只提供信息，不提供解释
- **记忆 → 认知**：只提供回忆，不提供偏好
- **认知 → 行动**：提供“要做什么”，不提供“怎么做”
- **控制状态 → 认知**：只提供策略约束引用，不注入语义内容
- **Runtime → 认知**：只提供当前执行态信息

---

### 9. 不可变设计原则（Non-Negotiables）

1. 认知层必须先于感官、行动、调度设计完成
2. Prompt 不作为单一实体存在于认知层
3. 任何实现层不得绕过认知前处理直接调用 LLM
4. 行为风格不得反向影响认知逻辑
5. 模型替换不得改变认知输入 / 输出结构

---

### 10. 定位总结

**把“用 LLM 思考”和“围绕 LLM 建系统”彻底分开。**
